# OPTIC-SHIELD Configuration
# Base configuration file - overridden by environment-specific configs

# Environment: development | production
# Set via OPTIC_ENV environment variable
environment: development

# Device identification
device:
  id: ""  # Auto-generated if empty
  name: "optic-shield-001"
  location:
    name: "Unknown Location"
    latitude: 0.0
    longitude: 0.0

# Detection settings
detection:
  model:
    path: "models/yolo11n_ncnn_model"
    fallback_path: "models/yolo11n.pt"
    confidence_threshold: 0.5
    iou_threshold: 0.45
    max_detections: 10
  
  # Target classes (Wild cats / Big cats only)
  # 15: tiger, 16: leopard, 17: jaguar, 18: lion, 19: cheetah
  # 20: snow leopard, 21: clouded leopard, 22: puma, 23: lynx
  target_classes: [15, 16, 17, 18, 19, 20, 21, 22, 23]
  
  # Processing settings
  input_size: 640
  batch_size: 1
  
  # Performance optimization
  use_ncnn: true
  num_threads: 4

# Camera settings
camera:
  enabled: true
  resolution:
    width: 640
    height: 480
  format: "RGB888"
  fps: 10
  rotation: 0
  
  # Fallback to USB camera if Pi Camera fails
  fallback_usb: true
  usb_device_id: 0

# Storage settings
storage:
  database:
    path: "data/detections.db"
    max_size_mb: 500
  
  images:
    path: "data/images"
    save_detections: true
    jpeg_quality: 85
    max_storage_mb: 2000
    cleanup_days: 30
  
  logs:
    path: "logs"
    max_size_mb: 100
    retention_days: 7

# Alert settings
alerts:
  enabled: true
  
  # Minimum time between alerts for same class (seconds)
  cooldown_seconds: 60
  
  # Local alerts
  local:
    gpio_enabled: false
    gpio_pin: 17
    buzzer_duration_ms: 500
  
  # Remote alerts (via dashboard API)
  remote:
    enabled: true
    include_image: true
    image_max_size_kb: 100
    retry_attempts: 3
    retry_delay_seconds: 5

# Dashboard API connection
dashboard:
  # API endpoint (set in environment-specific config)
  api_url: ""
  api_key: ""
  
  # WebSocket for real-time updates
  websocket_enabled: true
  websocket_url: ""
  
  # Sync settings
  sync_interval_seconds: 300
  heartbeat_interval_seconds: 60
  
  # Offline queue
  offline_queue_max_size: 1000

# System settings
system:
  # Watchdog - restart service if unresponsive
  watchdog:
    enabled: true
    timeout_seconds: 30
  
  # Auto-restart on crash
  auto_restart: true
  max_restart_attempts: 5
  restart_delay_seconds: 10
  
  # Resource limits
  max_memory_mb: 512
  max_cpu_percent: 80
  
  # Graceful shutdown timeout
  shutdown_timeout_seconds: 10

# Logging
logging:
  level: "INFO"
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  console: true
  file: true
  file_path: "logs/optic-shield.log"
